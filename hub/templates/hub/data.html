{% extends "AutoHub/home.html" %}

{% block title %} View Data {% endblock %}
{% load static %}
{% block content %}
<canvas id="data" width="800" height="300"></canvas>
{% endblock %}

{% block script %}
<script type="text/javascript" src="{% static 'js/smoothie.js' %}"></script>
<script>
    var smoothie = new SmoothieChart();
    smoothie.streamTo(document.getElementById("data"));
    
    var line1 = new TimeSeries();

    var dataSocket = new WebSocket(
        'ws://' + window.location.host +
        '/ws/hub/data/');

    dataSocket.onmessage = function(event) {
        console.debug("WebSocket message received:", event);
    };


//    dataSocket.onmessage = function(e) {
//        var data = JSON.parse(e.data);
//        var message = data['message'];
//        line1.append(new Date().getTime(), message);
//        smoothie.addTimeSeries(line1);
//    };

    dataSocket.onclose = function(e) {
        console.error('Chat socket closed unexpectedly');
    };
</script>
{% endblock %}
